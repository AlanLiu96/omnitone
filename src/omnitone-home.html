<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-styles/typography.html">

<dom-module id="omnitone-home">
  <template>

    <style>
      p {
        line-height: 28px;
        margin: 0 10px 10px;
        padding: 0;
      }

      .section {
        margin: 30px auto;
        padding: 0;
        text-align: center;
      }

      .section.title {
        color: #FFFFFF;
        background: #546e7a;
        background: radial-gradient(ellipse farthest-side at 50% 0, #546e7a 0%,#263238 100%);
        text-align: center;
        margin: 0;
        padding-top: 70px;
        padding-bottom: 80px;
      }

      .section.title h1 {
        @apply(--paper-font-display3);
        font-size: 52px;
        margin: 15px 0;
        padding: 0;
      }

      .section.title h2 {
        @apply(--paper-font-display2);
        font-size: 28px;
        font-weight: 200;
        line-height: 30px;
        margin: 15px 0;
        padding: 0;
      }

      .section.text {
        max-width: 768px;
      }

      .section.text p {
        @apply(--paper-font-subhead);
        font-size: 16px;
      }

      .section.jumbo {
        @apply(--layout-horizontal);
        @apply(--layout-wrap);
        @apply(--layout-justified);
        max-width: 768px;
      }

      .section.jumbo a {
        text-decoration: none;
        color: #FFFFFF;
      }

      .section.jumbo .jumbo-item {
        @apply(--layout-flex);
        -webkit-flex: 1 1;
        flex: 1 1;
        -webkit-flex-basis: 50%;
        flex-basis: 50%;
        max-width: 50%;
        margin: 10px 0;
      }

      .section.jumbo .jumbo-item p {
        @apply(--paper-font-subhead);
        font-size: 16px;
      }

      .section.resources {
        @apply(--layout-horizontal);
        max-width: 768px;
      }

      .section .grid {
        @apply(--layout-horizontal);
        @apply(--layout-wrap);
        @apply(--layout-justified);
        padding: 0;
        list-style: none;
      }

      .section .grid li {
        -webkit-flex: 1 1;
        flex: 1 1;
        -webkit-flex-basis: 50%;
        flex-basis: 50%;
        max-width: 50%;
        margin-bottom: 20px;
      }

      @media (max-width: 550px) {
        .section.jumbo .jumbo-item {
          -webkit-flex-basis: 100%;
          flex-basis: 100%;
          max-width: 100%;
        }

        .section .grid  li {
          -webkit-flex-basis: 100%;
          flex-basis: 100%;
          max-width: 100%;
        }
      }

      .section.resources h2 {
        font-weight: 400;
        font-size: 22px;
        margin: 0;
      }

      .section.resources p {
        @apply(--paper-font-body1);
        font-size: 14px;
        line-height: 22px;
        display: inline-block;
        margin: 20px;
        padding-top: 20px;
        border-top: 1px solid #B0BEC5;
        text-align: left;
      }

      .section.resources a {
        display: inline-block;
        text-decoration: none;
        color: #0091EA;
        margin: 0;
      }

      .section.footer {
        @apply(--paper-font-title);
        color: #90A4AE;
      }

      paper-button {
        background-color: #039be5;
        color: white;
        font-size: 16px;
        font-weight: 700;
        padding: 20px;
        margin: 20px 0;
      }

      paper-button iron-icon {
        margin-right: 12px;
      }
    </style>

    <div class="section title">
      <h1>Spatial Audio Renderer</h1>
      <h2>360&#176; Audio on the Web</h2>
    </div>

    <div class="section text">
      <p><strong>SAR</strong> (Spatial Audio Renderer) for Web is a Javascript 
        implementation of a <strong>first-order ambisonic</strong> decoder <br> 
        that allows you to <strong>binaurally render</strong> an ambisonic 
        recording directly on the browser.</p>
    </div>

    <div class="section jumbo">
      <div class="jumbo-item">
        <a href="demo-player.html">
          <paper-button id="eButtonPlayDemo" raised><iron-icon icon="av:play-circle-filled">
            </iron-icon>Play Demo</paper-button>
        </a>
        <p id="eText">Use <strong>headphones</strong> to experience the demo
          with the <em>full-sphere surround</em> effect.</p>
      </div>
      <div class="jumbo-item">
        <a href="https://github.com/GoogleChrome/omnitone/#omnitone" target="_blank">
          <paper-button raised><iron-icon icon="av:library-books"></iron-icon>
            Documentation</paper-button>
        </a>
        <p>Learn how to use <strong>SAR</strong> in your web page.</p>
      </div>
    </div>

    <div class="section resources">
      <ul class="grid">
        <li>
          <h2>Spatial Media</h2>
          <p>A collection of industry standards and tools for 360 video and
            spatial audio. Learn more about spatial media
            <a href="https://github.com/google/spatial-media/" target="_blank">
            here</a>.</p>
        </li>
        <li>
          <h2>VR view</h2>
          <p><a href="https://developers.google.com/vr/concepts/vrview/" target="_blank">VR view</a>
            allows you to embed 360 degree VR media into websites on desktop and
            mobile, and native apps on Android and iOS.</p>
        </li>
        <li>
          <h2>Web Audio API</h2>
          <p><strong>SAR</strong> is written with
            <a href="https://webaudio.github.io/web-audio-api/" target="_blank">
            Web Audio API</a> for the optimum audio processing in the
            interactive web apps.</p>
        </li>
        <li>
          <h2>Web VR</h2>
          <p><a href="https://webvr.info/" target="_blank">Web VR</a> is an
            experimental Javascript API that provides access to Virtual Reality
            devices, such as the Oculus Rift or GoogleCardboard, in your
            browser.</p>
        </li>
      </ul>
    </div>

  </template>

  <script>
    Polymer({

      is: 'omnitone-home',

      properties: {

        systemInfo: {
          type: Object,
          value: {}
        }

      },

      _initialize: function () {
        // detect browser and platform.
        var ua = navigator.userAgent, tem,
        M = ua.match(/(opera|chrome|safari|firefox|edge(?=\/))\/?\s*(\d+)/i) || [];
        if (/trident/i.test(M[1])) {
          tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
          return 'IE ' + (tem[1] || '');
        }
        if (M[1] === 'Chrome') {
          tem = ua.match(/\bOPR\/(\d+)/);
          if (tem !== null)
            return 'Opera '+ tem[1];
        }
        M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];
        if ((tem = ua.match(/version\/(\d+)/i)) !== null)
          M.splice(1, 1, tem[1]);

        this.systemInfo.browser = M[0];
        this.systemInfo.browserVersion = M[1];

        if (ua.match(/iPad/i) || ua.match(/iPhone/i)) {
          this.systemInfo.platform = 'iOS';
        } else if (ua.match(/Mac OS X/i)) {
          this.systemInfo.platform = 'OSX';
        } else if (ua.match(/Android/i)) {
          this.systemInfo.platform = 'Android';
        } else if (ua.match(/Win/i)) {
          this.systemInfo.platform = 'Windows';
        }

        console.log('[LANDING] system info: ', this.systemInfo);
      },

      // _verifySystemForDemo: function () {
      //   var info = this.systemInfo;
      //   if (info.platform === 'iOS')
      //     return;

      //   if (info.browser === 'Firefox' || info.browser === 'Edge')
      //     return;

      //   // Passed the test, activate the demo link.
      //   this.$.eButtonPlayDemo.disabled = false;
      // },

      attached: function () {
        this._initialize();
      }

    });
  </script>

</dom-module>
